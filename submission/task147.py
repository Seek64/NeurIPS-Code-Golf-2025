import re;p=lambda g:[g:=eval(re.sub("3(?=..[38])","8",f"{[*map(list,zip(*g[::-1]))]}"))for _ in g*4][-1]