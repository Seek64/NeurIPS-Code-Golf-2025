p=lambda g:[g:=[r[::3]for*r,in zip(*g)if any(r)]for _ in'xx']*0+[[c&d for c in a for d in b]for a in g for b in g]